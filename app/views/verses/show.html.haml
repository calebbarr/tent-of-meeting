%title
	Tent of Meeting -
	= @book.name.to_s
	= @chapter.name.to_s + "\:"+@verse.name.to_s
%h1
	= @verse.link

- audio_url = audio_url(@verse.name.to_s,@chapter.name.to_s,@book.name,@book.id.to_s)
%embed{:height => "27", :src => "http://www.google.com/reader/ui/3523697345-audio-player.swf?audioUrl="+audio_url, :type => "application/x-shockwave-flash", :width => "25%", :wmode => "transparent"}
#verse_text{:style => "width:50%;"}
	-if @translations == nil then
		=@verse_text
	-else
		-tokens = @verse_text.split()
		-tokens.each_with_index do |token,index|
			%span{title: @translations[index]}
				- if index < @strong_ids.length then
					=link_to token, ->{ @verse.id > NUM_STRONGS_HEBREW ? "/greek/" :  "/hebrew/"}.call + @strong_ids[index]
				- else 
					= token
%font{:size => "1"}
	= link_to("memorize", "/"+@book.name+"/"+@chapter.name.to_s+"/"+@verse.name.to_s+"/memorize")
	,
	=  -> {return  @verse.has_quiz? ?  link_to("take quiz", "/"+@book.name+"/"+@chapter.name.to_s+"/"+@verse.name.to_s+"/quiz") : link_to("create quiz", "/"+@book.name+"/"+@chapter.name.to_s+"/"+@verse.name.to_s+"/quiz/new")}.call
	,
	= link_to "related", "/verses/related?verse="+@verse.id.to_s
	,
	/the 1 here is just a stand-in for session-based code if not authenticated
	= -> {return @verse.is_favorite?(id = -> {signed_in? ? current_user.id : 1 }.call ) ?  link_to("\u2665", controller: :verses, action: :remove_favorite_verse,  id: @verse.id) : link_to("\u2661", controller: :verses, action: :add_favorite_verse,  id: @verse.id) }.call
	,
	/the 1 here is just a stand-in for session-based code if not authenticated
	= -> { return @verse.has_note?(id = -> {signed_in? ? current_user.id : 1 }.call ) ?  link_to("✎", controller: :notes, action: :show, :verse_id => @verse.id) : link_to("✎", controller: :notes, action: :new, :verse_id => @verse.id) }.call